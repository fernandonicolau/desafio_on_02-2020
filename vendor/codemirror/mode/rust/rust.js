!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("rust",function(){var e,t,n={if:"if-style",while:"if-style",loop:"else-style",else:"else-style",do:"else-style",ret:"else-style",fail:"else-style",break:"atom",cont:"atom",const:"let",resource:"fn",let:"let",fn:"fn",for:"for",alt:"alt",iface:"iface",impl:"impl",type:"type",enum:"enum",mod:"mod",as:"op",true:"atom",false:"atom",assert:"op",check:"op",claim:"op",native:"ignore",unsafe:"ignore",import:"else-style",export:"else-style",copy:"op",log:"op",log_err:"op",use:"op",bind:"op",self:"atom",struct:"enum"},r=function(){for(var e={fn:"fn",block:"fn",obj:"obj"},t="bool uint int i8 i16 i32 i64 u8 u16 u32 u64 float f32 f64 str char".split(" "),n=0,r=t.length;n<r;++n)e[t[n]]="atom";return e}(),o=/[+\-*&%=<>!?|\.@]/;function a(t,n){return e=t,n}function i(n,r){var l=n.next();if('"'==l)return r.tokenize=u,r.tokenize(n,r);if("'"==l)return e="atom",n.eat("\\")?n.skipTo("'")?(n.next(),"string"):"error":(n.next(),n.eat("'")?"string":"error");if("/"==l){if(n.eat("/"))return n.skipToEnd(),"comment";if(n.eat("*"))return r.tokenize=function e(t){return function(n,r){for(var o,a=null;o=n.next();){if("/"==o&&"*"==a){if(1==t){r.tokenize=i;break}return r.tokenize=e(t-1),r.tokenize(n,r)}if("*"==o&&"/"==a)return r.tokenize=e(t+1),r.tokenize(n,r);a=o}return"comment"}}(1),r.tokenize(n,r)}if("#"==l)return n.eat("[")?(e="open-attr",null):(n.eatWhile(/\w/),a("macro","meta"));if(":"==l&&n.match(":<"))return a("op",null);if(l.match(/\d/)||"."==l&&n.eat(/\d/)){var c=!1;return n.match(/^x[\da-f]+/i)||n.match(/^b[01]+/)||(n.eatWhile(/\d/),n.eat(".")&&(c=!0,n.eatWhile(/\d/)),n.match(/^e[+\-]?\d+/i)&&(c=!0)),c?n.match(/^f(?:32|64)/):n.match(/^[ui](?:8|16|32|64)/),a("atom","number")}return l.match(/[()\[\]{}:;,]/)?a(l,null):"-"==l&&n.eat(">")?a("->",null):l.match(o)?(n.eatWhile(o),a("op",null)):(n.eatWhile(/\w/),t=n.current(),n.match(/^::\w/)?(n.backUp(1),a("prefix","variable-2")):r.keywords.propertyIsEnumerable(t)?a(r.keywords[t],t.match(/true|false/)?"atom":"keyword"):a("name","variable"))}function u(e,t){for(var n,r=!1;n=e.next();){if('"'==n&&!r)return t.tokenize=i,a("atom","string");r=!r&&"\\"==n}return a("op","string")}var l={state:null,stream:null,marked:null,cc:null};function c(){for(var e=arguments.length-1;e>=0;e--)l.cc.push(arguments[e])}function f(){return c.apply(null,arguments),!0}function m(e,t){var n=function(){var n=l.state;n.lexical={indented:n.indented,column:l.stream.column(),type:e,prev:n.lexical,info:t}};return n.lex=!0,n}function d(){var e=l.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function s(){l.state.keywords=r}function k(){l.state.keywords=n}function p(e,t){function n(r){return","==r?f(e,n):r==t?f():f(n)}return function(r){return r==t?f():c(e,n)}}function h(e,t){return f(m("stat",t),e,d,y)}function y(e){return"}"==e?f():"let"==e?h(C,"let"):"fn"==e?h($):"type"==e?f(m("stat"),S,x,d,y):"enum"==e?h(I):"mod"==e?h(P):"iface"==e?h(T):"impl"==e?h(q):"open-attr"==e?f(m("]"),p(b,"]"),d):"ignore"==e||e.match(/[\]\);,]/)?f(y):c(m("stat"),b,d,x,y)}function x(e){return";"==e?f():c()}function b(e){return"atom"==e||"name"==e?f(w):"{"==e?f(m("}"),g,d):e.match(/[\[\(]/)?N(e,b):e.match(/[\]\)\};,]/)?c():"if-style"==e?f(b,b):"else-style"==e||"op"==e?f(b):"for"==e?f(F,E,M,b,b):"alt"==e?f(b,H):"fn"==e?f($):"macro"==e?f(L):f()}function w(e){return"."==t?f(v):"::<"==t?f(A,w):"op"==e||":"==t?f(b):"("==e||"["==e?N(e,b):c()}function v(){return t.match(/^\w+$/)?(l.marked="variable",f(w)):c(b)}function g(e){if("op"==e){if("|"==t)return f(j,d,m("}","block"),y);if("||"==t)return f(d,m("}","block"),y)}return"mutable"==t||t.match(/^\w+$/)&&":"==l.stream.peek()&&!l.stream.match("::",!1)?c(z(b)):c(y)}function z(e){return function n(r){return"mutable"==t||"with"==t?(l.marked="keyword",f(n)):t.match(/^\w*$/)?(l.marked="variable",f(n)):":"==r?f(e,n):"}"==r?f():f(n)}}function j(e){return"name"==e?(l.marked="def",f(j)):"op"==e&&"|"==t?f():f(j)}function C(e){return e.match(/[\]\)\};]/)?f():"="==t?f(b,W):","==e?f(C):c(F,E,C)}function W(e){return e.match(/[\]\)\};,]/)?c(C):c(b,W)}function E(e){return":"==e?f(s,_,k):c()}function M(e){return"name"==e&&"in"==t?(l.marked="keyword",f()):c()}function $(e){return"@"==t||"~"==t?(l.marked="keyword",f($)):"name"==e?(l.marked="def",f($)):"<"==t?f(A,$):"{"==e?c(b):"("==e?f(m(")"),p(U,")"),d,$):"->"==e?f(s,_,k,$):";"==e?f():f($)}function S(e){return"name"==e?(l.marked="def",f(S)):"<"==t?f(A,S):"="==t?f(s,_,k):f(S)}function I(e){return"name"==e?(l.marked="def",f(I)):"<"==t?f(A,I):"="==t?f(s,_,k,x):"{"==e?f(m("}"),s,O,k,d):f(I)}function O(e){return"}"==e?f():"("==e?f(m(")"),p(_,")"),d,O):(t.match(/^\w+$/)&&(l.marked="def"),f(O))}function P(e){return"name"==e?(l.marked="def",f(P)):"{"==e?f(m("}"),y,d):c()}function T(e){return"name"==e?(l.marked="def",f(T)):"<"==t?f(A,T):"{"==e?f(m("}"),y,d):c()}function q(e){return"<"==t?f(A,q):"of"==t||"for"==t?(l.marked="keyword",f(_,q)):"name"==e?(l.marked="def",f(q)):"{"==e?f(m("}"),y,d):c()}function A(){return">"==t?f():","==t?f(A):":"==t?f(_,A):c(_,A)}function U(e){return"name"==e?(l.marked="def",f(U)):":"==e?f(s,_,k):c()}function _(e){return"name"==e?(l.marked="variable-3",f(B)):"mutable"==t?(l.marked="keyword",f(_)):"atom"==e?f(B):"op"==e||"obj"==e?f(_):"fn"==e?f(D):"{"==e?f(m("{"),z(_),d):N(e,_)}function B(){return"<"==t?f(A):c()}function D(e){return"("==e?f(m("("),p(_,")"),d,D):"->"==e?f(_):c()}function F(e){return"name"==e?(l.marked="def",f(G)):"atom"==e?f(G):"op"==e?f(F):e.match(/[\]\)\};,]/)?c():N(e,F)}function G(e){return"op"==e&&"."==t?f():"to"==t?(l.marked="keyword",f(F)):c()}function H(e){return"{"==e?f(m("}","alt"),J,d):c()}function J(e){return"}"==e?f():"|"==e?f(J):"when"==t?(l.marked="keyword",f(b,K)):e.match(/[\]\);,]/)?f(J):c(F,K)}function K(e){return"{"==e?f(m("}","alt"),y,d,J):c(J)}function L(e){return e.match(/[\[\(\{]/)?N(e,b):c()}function N(e,t){return"["==e?f(m("]"),p(t,"]"),d):"("==e?f(m(")"),p(t,")"),d):"{"==e?f(m("}"),p(t,"}"),d):f()}return d.lex=s.lex=k.lex=!0,{startState:function(){return{tokenize:i,cc:[],lexical:{indented:-4,column:0,type:"top",align:!1},keywords:n,indented:0}},token:function(n,r){if(n.sol()&&(r.lexical.hasOwnProperty("align")||(r.lexical.align=!1),r.indented=n.indentation()),n.eatSpace())return null;e=t=null;var o=r.tokenize(n,r);return"comment"==o?o:(r.lexical.hasOwnProperty("align")||(r.lexical.align=!0),"prefix"==e?o:(t||(t=n.current()),function(t,n,r){var o=t.cc;for(l.state=t,l.stream=n,l.marked=null,l.cc=o;;)if((o.length?o.pop():y)(e)){for(;o.length&&o[o.length-1].lex;)o.pop()();return l.marked||r}}(r,n,o)))},indent:function(e,t){if(e.tokenize!=i)return 0;var n=t&&t.charAt(0),r=e.lexical,o=r.type,a=n==o;return"stat"==o?r.indented+4:r.align?r.column+(a?0:1):r.indented+(a?0:"alt"==r.info?2:4)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}}),e.defineMIME("text/x-rustsrc","rust")});